{
    "version": "0.1.0",
    "configurations": [
        {
            "name": "launch as server",
            "type": "node",
            "protocol": "inspector",
            "request": "launch",
            "cwd": "${workspaceFolder}",
            "program": "${workspaceFolder}/out/src/chromeDebug.js",
            "args": [ "--server=4712" ],
            "outFiles": ["${workspaceFolder}/out/**/*.js"]
        },
        {
            // "debugServer": 4712,
            "name": "test",
            "type": "node",
            "protocol": "inspector",
            "request": "launch",
            "cwd": "${workspaceFolder}",
            "program": "${workspaceFolder}/node_modules/mocha/bin/_mocha",
            "args": [
                "-u", "tdd",
				"--colors",
				"out/test/*.test.js",
                "--timeout", "1800000",
            ],
            "outFiles": ["${workspaceFolder}/out/**/*.js"]
        },
        {
            "type": "node",
            "request": "launch",
            "name": "intTest",
            "program": "${workspaceFolder}/node_modules/mocha/bin/_mocha",
            "args": [
                "-u", "tdd",
                "--timeout", "999999",
                "--colors",
                "--reporter", "node_modules/vscode-chrome-debug-core-testsupport/out/loggingReporter.js",
                "${workspaceFolder}/out/test/int/*.test.js"
            ],
            "skipFiles": ["<node_internals>/**"],
            "outFiles": [
                "${workspaceFolder}/out/**/*.js"
            ]
        },
        {
            "type": "node",
            "request": "launch",
            "name": "frameworkTest",
            "program": "${workspaceFolder}/node_modules/mocha/bin/_mocha",
            "args": [
                "-u", "tdd",
                "--timeout", "999999",
                "--colors",
                "--reporter", "node_modules/vscode-chrome-debug-core-testsupport/out/loggingReporter.js",
                "${workspaceFolder}/out/test/int/framework/*.test.js"
            ],
            "skipFiles": ["<node_internals>/**"],
            "outFiles": [
                "${workspaceFolder}/out/**/*.js"
            ]
        },
        {
            "type": "node",
            "request": "launch",
            "name": "debug integration test",
            "program": "${workspaceFolder}/node_modules/mocha/bin/_mocha",
            "env": {
                // TEST_DA_PORT: Enable this to debug the debug-adapter while the tests are running (The test will look for a debug-adapter server on port 4712 instead of launching a new one)
                // "TEST_DA_PORT": "4712",
                // TEST_TIMEOUT_MULTIPLIER: The tests have long timeouts for the CI server. While debugging locally it's sometimes useful to reduce the timeouts, to be able to run all the tests faster when they are failing. This value is a multiplier that will be applied to all timeouts using during the tests... (Work in progress)
                "TEST_TIMEOUT_MULTIPLIER": "0.4",
                // TEST_DA_HIDE_WINDOWS: Enable this to hinde the windows that the test create (e.g.: Chrome windows, and Power Shell windows)
                // "TEST_DA_HIDE_WINDOWS": "true",
            },
            "args": [
                "--require", "source-map-support/register",
                "-u", "tdd",
                "--timeout", "9999999",
                "--colors",
                "--grep", "url in sources",
                "--reporter", "node_modules/vscode-chrome-debug-core-testsupport/out/loggingReporter.js",
                "${workspaceFolder}/out/test/int/**/*.test.js",
            ],
            "skipFiles": [
                "<node_internals>/**",
                "methodsCalledLogger.ts",
                "source-map-support.js",
                "logger.ts",
                "printObjectDescription.ts",
                "runnable.js",
                "runner.js",
                "next_tick.js",
                "hook.js",
                "/suite.js",
                "context.js",
            ],
            "outFiles": [
                "${workspaceFolder}/out/**/*.js"
            ]
        },
        {
			"name": "Run Extension",
			"type": "extensionHost",
			"request": "launch",
			"runtimeExecutable": "${execPath}",
			"args": [
				"--extensionDevelopmentPath=${workspaceFolder}"
			],
			"outFiles": [ "${workspaceFolder}/out/**/*.js" ]
		},
        {
            "name": "attach chrome-debug",
            "type": "node",
            "request": "attach",
            "protocol": "inspector",
            "port": 1235,
            "outFiles": ["${workspaceFolder}/out/**/*.js"],
            "internalConsoleOptions": "openOnSessionStart",
            "smartStep": true
        },
        {
            "name": "Debug gulpfile",
            "type": "node",
            "request": "launch",
            "protocol": "inspector",

            "cwd": "${workspaceFolder}",
            "program": "${workspaceFolder}/node_modules/gulp/bin/gulp.js",
            "args": [
                "build"
            ],
            "internalConsoleOptions": "openOnSessionStart"
        }
    ]
}
